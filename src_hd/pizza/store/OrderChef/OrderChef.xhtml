<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:pm="http://primefaces.org/mobile">
<h:body>
	<ui:composition template="/layouts/basic.xhtml">
		<ui:define name="title">OrderChef</ui:define>
		<ui:define name="content">
			<h1 style="text-align: center">Pizza Store</h1>
			<h2 style="text-align: center">Confirmed orders</h2>
			<div class="container">
				<div class="row">
					<form class="form-horizontal">
						<div class="form-group">
							<div class="main">
								<div class="form-group has-feedback has-search">
									<span class="glyphicon glyphicon-search form-control-feedback"></span>
									<input type="text" class="form-control" placeholder="Search" />
								</div>
							</div>
							<div class="col-sm-10" style="margin: 50px">
								<table class="table">
									<thead class="thead-light">
										<tr>
											<th scope="col">Order No</th>
											<th scope="col">Date</th>
											<th scope="col">Items</th>
											<th scope="col">Name</th>
											<th scope="col">Phone Number</th>
											<th scope="col">Price</th>
											<th scope="col">Action</th>
										</tr>
									</thead>
									<tbody id = "data-table">
										<ui:repeat value="#{data.dataOrdered}" var="order">
											<tr id = "order#{order.orderId}">
												<th scope="row">#{order.orderId}</th>
												<td>#{order.date}</td>
												<td>
													<ui:repeat value="#{order.products}" var="item">
														<SPAN>#{item.name} x #{item.quantity}</SPAN>
														<br/>
													</ui:repeat>
												</td>
												<td>#{order.name}</td>
												<td>#{order.phone}</td>
												<td>#{order.totalPrice} $</td>
												<td>
													<h:form>
														<p:commandButton actionListener="#{logic.confirmOrder(order.orderId, order.status)}" oncomplete="updateOrders(#{order.orderId})"  value="Done" styleClass="btn btn-primary"/>
													</h:form>
												</td>
											</tr>
										</ui:repeat>
									</tbody>
								</table>
							</div>
						</div>
					</form>
				</div>
			</div>
			<script type="text/javascript">
				function updateOrders(id) {
					var nodeChild = document.getElementById('order'+id+'');
					document.getElementById("data-table").removeChild(nodeChild); 
				}
			</script>
		</ui:define>
	</ui:composition>
</h:body>
</html>